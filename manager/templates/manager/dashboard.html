{% extends 'manager/base.html' %}
{% block content %}
<div class="container py-4">
  <h2>ðŸ‘‹ Welcome, {{ request.user.username }}</h2>
  <h4>Your Assigned Tasks</h4>

  <ul class="list-group">
    {% for task in tasks %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ task.title }}</strong> â€“ 
          <span class="{% if task.status == 'Completed' %}text-success{% endif %}">
            {{ task.status }}
          </span>
          (Project: {{ task.project.name }})
        </div>

        {% if task.status != 'Completed' %}
        <form method="post" action="{% url 'mark_task_complete' task.id %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-success">Mark as Completed</button>
        </form>
        {% else %}
          <span class="badge bg-success">Done</span>
        {% endif %}
      </li>
    {% empty %}
      <li class="list-group-item">No tasks assigned to you.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
